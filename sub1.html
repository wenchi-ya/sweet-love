<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ‹çˆ±å°æ¸¸æˆ â¤</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      color: pink;
      text-align: center;
      font-family: 'Microsoft YaHei';
    }
    h1 {
      position: absolute;
      top: 20%;
      width: 100%;
      font-size: 3rem;
      animation: fade 3s infinite;
      z-index: 2;
    }
    @keyframes fade {
      0%,100% { opacity: 0; }
      50% { opacity: 1; }
    }
    canvas {
      position: fixed;
      top: 0; left: 0;
      z-index: 0;
    }
    /* è¿”å›æŒ‰é’® */
    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 10px 20px;
      background: rgba(255,105,180,0.8);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      z-index: 3;
      text-decoration: none;
    }
    .back-btn:hover {
      background: rgba(255,50,120,1);
    }
    /* æ¸¸æˆåŒº */
    #game {
      position: absolute;
      bottom: 80px;
      width: 100%;
      text-align: center;
      z-index: 2;
      color: white;
    }
    #score {
      font-size: 1.2rem;
      margin-bottom: 10px;
      display: block;
    }
    .heart {
      position: absolute;
      font-size: 24px;
      color: red;
      cursor: pointer;
      animation: fall linear;
    }
    @keyframes fall {
      from { top: -30px; }
      to { top: 100vh; }
    }
    /* éŸ³ä¹æŒ‰é’® */
    #musicBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(255,105,180,0.8);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      color: white;
      cursor: pointer;
      z-index: 5;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: background 0.3s;
    }
    #musicBtn:hover {
      background: rgba(255,50,120,1);
    }
  </style>
</head>
<body>
  <a href="index.html" class="back-btn">â¬… è¿”å›</a>
  <h1 id="words">æˆ‘çˆ±ä½  â¤</h1>
  <canvas id="fireworks"></canvas>

  <!-- æ¸¸æˆåŒº -->
  <div id="game">
    <span id="score">å¾—åˆ†: 0</span>
    <p>ç‚¹å‡»æ‰è½çš„ â¤ è·å–åˆ†æ•°ï¼</p>
  </div>

  <!-- èƒŒæ™¯éŸ³ä¹ -->
  <audio id="bgm" autoplay loop>
    <source src="music/head.mp3" type="audio/mp3">
    ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ audio æ ‡ç­¾ã€‚
  </audio>
  <button id="musicBtn">ğŸ”Š</button>
  
  <script>
    // ========== è¡¨ç™½å¾ªç¯è¯­å¥ ==========
    const msgs = ["äº²çˆ±çš„ï¼Œä½ æ˜¯æˆ‘çš„å”¯ä¸€ â¤","é‡è§ä½ æ˜¯æˆ‘ä¸€ç”Ÿæœ€ç¾çš„æ„å¤– ğŸ’•","æ— è®ºä½•æ—¶ä½•åœ°ï¼Œæˆ‘éƒ½çˆ±ä½  ğŸ’–"];
    let idx = 0;
    setInterval(()=>{
      document.getElementById("words").innerText = msgs[idx];
      idx = (idx+1)%msgs.length;
    },3000);

    // ========== çƒŸèŠ±åŠ¨ç”» ==========
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    resize();
    window.addEventListener("resize", resize);

    let particles = [];
    function resize(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    function random(min,max){ return Math.random()*(max-min)+min; }
    function createFirework(){
      const x = random(0,canvas.width);
      const y = random(0,canvas.height/2);
      const color = `hsl(${random(0,360)},100%,60%)`;
      for(let i=0;i<100;i++){
        particles.push({
          x,y,
          angle: random(0,2*Math.PI),
          speed: random(1,5),
          life: 100,
          color
        });
      }
    }
    function loop(){
      ctx.fillStyle = "rgba(0,0,0,0.2)";
      ctx.fillRect(0,0,canvas.width,canvas.height);
      particles.forEach((p,i)=>{
        p.x += Math.cos(p.angle)*p.speed;
        p.y += Math.sin(p.angle)*p.speed;
        p.life--;
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x,p.y,2,2);
        if(p.life<=0) particles.splice(i,1);
      });
      requestAnimationFrame(loop);
    }
    setInterval(createFirework,1000);
    loop();

    // ========== ç‚¹å‡»çˆ±å¿ƒå°æ¸¸æˆ ==========
    let score = 0;
    function spawnHeart(){
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.innerHTML = "â¤";
      heart.style.left = Math.random()*90 + "vw";
      heart.style.top = "-30px";
      heart.style.animationDuration = (3+Math.random()*3)+"s";

      heart.addEventListener("click", ()=>{
        score++;
        document.getElementById("score").innerText = "å¾—åˆ†: " + score;
        heart.remove();
      });

      document.body.appendChild(heart);

      setTimeout(()=>{ heart.remove(); },6000);
    }
    setInterval(spawnHeart, 1500);

    // ========== éŸ³ä¹æ§åˆ¶ ==========
    const bgm = document.getElementById("bgm");
    const musicBtn = document.getElementById("musicBtn");
    musicBtn.addEventListener("click", ()=>{
      if (bgm.paused) {
        bgm.play();
        musicBtn.textContent = "ğŸ”Š";
      } else {
        bgm.pause();
        musicBtn.textContent = "ğŸ”‡";
      }
    });
  </script>
</body>
</html>
